<tool id="hpc_msn" name="Mass Spectral Networking" version="1.0.0">
  <description>Mass Spectral Networking</description>
    <command interpreter="python">hpc_msn.py "$input_raw_files" "$score_threshold" "$max_subnetwork_size" "$spectral_count_threshold" "$k_max_difference" "$k_max_relative_difference" "$same_mass_cosine_cutoff" "$k_rt_min" "$k_rt_max" "$half_isolation_width" "$kMass_of_a_roton" "$precursor_intensity_cutoff" "$max_percent_base_peak" "$k_ms2_tolerance" "$annotation_database" $xgmml_outfile $console_outfile</command>
  <inputs>
    <param name="input_raw_files" type="data_collection" collection_type="list" label="Input Dataset List" help="Input collection..."/>
    <param name="score_threshold" type="text" value="0.6" label="Score Threshold"/>
    <param name="max_subnetwork_size" type="text" value="250" label="Max Subnetwork Size"/>
    <param name="spectral_count_threshold" type="text" value="2" label="Spectral Count Threshold"/>
    <param name="k_max_difference" type="text" value="0.0001" label="k Max Difference"/>
    <param name="k_max_relative_difference" type="text" value="2E-05" label="k Max Relative Difference"/>
    <param name="same_mass_cosine_cutoff" type="text" value="0.6" label="Same Mass Cosine Cutoff"/>
    <param name="k_rt_min" type="text" value="0" label="k RT min"/>
    <param name="k_rt_max" type="text" value="100" label="k RT max"/>
    <param name="half_isolation_width" type="text" value="1.0" label="Half Isolation Width"/>
    <param name="kMass_of_a_roton" type="text" value="1.007276" label="k Mass Of A Proton"/>
    <param name="precursor_intensity_cutoff" type="text" value="30000.0" label="Precursor Intensity Cutoff"/>
    <param name="max_percent_base_peak" type="text" value="0.75" label="Max Percent Base Peak"/>
    <param name="k_ms2_tolerance" type="text" value="0.005" label="k MS2 Tolerance"/>
    <param name="annotation_database" format="csv" type="data" label="Annotation Database"/>
  </inputs>
    <outputs>
        <data format="xgmml" name="xgmml_outfile" type="xgmml" label="Molecular Networking xgmml File"/>
        <data format="text" name="console_outfile" type="text" label="Log File"/>
    </outputs>
  <tests>
    <test>
<!--      <param name="input1">
        <collection type="list">
          <element name="l11" value="simple_line.txt" />
          <element name="l12" value="simple_line.txt" />
        </collection>
      </param>
      <output_collection name="list_output" type="list">
        <element name="l11">
          <assert_contents>
            <has_text_matching expression="^identifier is l11\n$" />
          </assert_contents>
        </element>
        <element name="l12">
          <assert_contents>
            <has_text_matching expression="^identifier is l12\n$" />
          </assert_contents>
        </element>
      </output_collection>-->
    </test>
  </tests>

<help>
**What it does**

Clusters the metadata and data into a Json file. Subsequently returns an html file that when opened in an internet browser, returns a heatmap of your color preference.

**Input**

Data for clustering should be supplied to the tool as csv (comma separated values) files.
If the user wants to have column headers displayed in the heatmap, the first row of a csv file must contain header names.
Row and column metadata are provided in a separate csv files. 
The first column of both data and row metadata (not applicable to column metadata file) files is always taken as an ID column. 
Below are given example snippets of data and row/column metadata files. They represent the activities of several ligands measured at three different concentrations with three physico-chemical properties as row metadata and three measurement properties as column metadata.

________________________________________________

Data file: 

compoundid,1x10-5 mol.dm-3,1x10-4 mol.dm-3, 1x10-3 mol.dm-3

13736,6.675,5.932,4.799

13738,4.482,10.458,5.68

__________________________________________________

Row_Metadata file: 

compoundid,LogP,Molecular Weight,Aromatic Rings

13736,2.788,286.157,1

13738,3.829,314.188,1

13548,4.45,330.219,0

_________________________________________________

Column_Metadata file: 

Solvent,DMSO,DMSO,DMSO

Concentration,0.00001,0.0001,0.001

Measurement order,2,1,3


  </help>





</tool>


